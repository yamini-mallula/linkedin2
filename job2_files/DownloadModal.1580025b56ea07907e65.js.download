(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1002:function(e,t,n){(function(n){var r,o,c;o=[],void 0===(c="function"==typeof(r=function(){"use strict";function b(a,b){return void 0===b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a}function t(a,b,e){var t=new XMLHttpRequest;t.open("GET",a),t.responseType="blob",t.onload=function(){g(t.response,b,e)},t.onerror=function(){console.error("could not download file")},t.send()}function r(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function o(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(e){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,e){var i=c.URL||c.webkitURL,n=document.createElement("a");g=g||b.name||"download",n.download=g,n.rel="noopener","string"==typeof b?(n.href=b,n.origin===location.origin?o(n):r(n.href)?t(b,g,e):o(n,n.target="_blank")):(n.href=i.createObjectURL(b),setTimeout((function(){i.revokeObjectURL(n.href)}),4e4),setTimeout((function(){o(n)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,g,n){if(g=g||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(b(e,n),g);else if(r(e))t(e,g,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){o(i)}))}}:function(b,e,n,g){if((g=g||open("","_blank"))&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return t(b,e,n);var r="application/octet-stream"===b.type,i=/constructor/i.test(c.HTMLElement)||c.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&i||a)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var a=d.result;a=o?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},d.readAsDataURL(b)}else{var l=c.URL||c.webkitURL,f=l.createObjectURL(b);g?g.location=f:location.href=f,g=null,setTimeout((function(){l.revokeObjectURL(f)}),4e4)}});c.saveAs=g.saveAs=g,e.exports=g})?r.apply(t,o):r)||(e.exports=c)}).call(this,n(30))},719:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return h}));var r=n(59),o=n(736),c=n(109);function d(e,t,n,o){return Object(r.f)((()=>e.post("/subscriptions",t,Object(r.e)({},n,o))))}async function l({addProducts:e=[],removeProducts:t=[],quantity:n=0,provider:o="stripe",source:source,referralCode:l,recaptchaToken:f="",metadata:w,clientRedirectUrl:h,trialId:v,trialDays:y}={}){let j=!1,O={success:!1,actions:[]};return await Object(r.b)(d(c.d,{addProducts:e,removeProducts:t,quantity:n,provider:o,source:source,referralCode:l,metadata:w,clientRedirectUrl:h,trialId:v,trialDays:y},f||await m("buySubscription"))).then((e=>{O=e})).catch((e=>{var t;if("INVALID_RECAPTCHA"!==e.meta.code||!e.meta.retryWithV2)throw e;j=null!==(t=e.meta.retryWithV2)&&void 0!==t&&t})),j&&(O=await Object(r.b)(d(c.d,{addProducts:e,removeProducts:t,quantity:n,provider:o,source:source,referralCode:l,metadata:w,clientRedirectUrl:h,trialId:v,trialDays:y},await m("buySubscription",!0),!0))),O}function f(e){return Object(r.b)((t=c.d,n=e,Object(r.f)((()=>t.post(`/subscriptions/${n.subscriptionId}/resume`,n)))));var t,n}function w(){return Object(r.b)((e=c.d,Object(r.f)((()=>e.get("/purchases")))));var e}function h(data){return Object(r.b)((e=c.d,t=data,Object(r.f)((()=>e.post("/purchases",t)))));var e,t}function m(e,t){if(t){const e=Object(c.c)();if(!e)throw new Error("Please, call 'setRecaptchaV2SiteKey' before using recaptcha. Import it from '@icons8/billing-api/v2/config'");return Object(o.a)(e)}const n=Object(c.b)();if(!n)throw new Error("Please, call 'setRecaptchaSiteKey' before using recaptcha. Import it from '@icons8/billing-api/v1/config'");return Object(o.b)(e,n)}},736:function(e,t,n){"use strict";async function r(e="buySubscription",t){return await async function(e){if("undefined"==typeof window)throw new Error("Recaptcha cannot be loaded in SSR context");if("grecaptcha"in window)return;const t=document.createElement("script");return t.setAttribute("src",`https://www.google.com/recaptcha/api.js?render=${e}`),document.head.appendChild(t),new Promise(((e,n)=>{t.addEventListener("load",(()=>e())),t.addEventListener("error",n)}))}(t),await new Promise((e=>window.grecaptcha.ready(e))),window.grecaptcha.execute(t,{action:e})}async function o(e){await async function(e){if("undefined"==typeof window)throw new Error("Recaptcha cannot be loaded in SSR context");const t=window;if(t.recaptchaV2Callback)return;t.grecaptcha=void 0,t.recaptchaV2Callback=e=>{document.dispatchEvent(new CustomEvent("i8recaptchav2",{detail:e}))};const n=document.createElement("div");n.className="g-recaptcha",n.setAttribute("data-callback","recaptchaV2Callback"),n.setAttribute("data-sitekey",e),n.setAttribute("data-size","invisible"),document.body.insertBefore(n,document.body.firstChild);const r=document.createElement("script");return r.src="https://www.google.com/recaptcha/api.js",r.async=!0,r.defer=!0,document.head.appendChild(r),new Promise(((e,t)=>{r.addEventListener("load",(()=>e())),r.addEventListener("error",t)}))}(e);const t=window.grecaptcha;if(!t)throw new Error("No global recaptcha object");return await new Promise((e=>t.ready(e))),t.execute(),new Promise((e=>{document.addEventListener("i8recaptchav2",(t=>{e(t.detail)}),!0)}))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},838:function(e,t,n){"use strict";var r="https://js.stripe.com/v3",o=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,c="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",d=null,l=function(e){return null!==d||(d=new Promise((function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(c),window.Stripe)t(window.Stripe);else try{var script=function(){for(var e=document.querySelectorAll('script[src^="'.concat(r,'"]')),i=0;i<e.length;i++){var script=e[i];if(o.test(script.src))return script}return null}();script&&e?console.warn(c):script||(script=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",script=document.createElement("script");script.src="".concat(r).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(script),script}(e)),script.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),script.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(e){return void n(e)}else t(null)}))),d},f=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:t})}(r,n),r},w=Promise.resolve().then((function(){return l(null)})),h=!1;w.catch((function(e){h||console.warn(e)}));var m=n(59),v=n(719);async function y(e){try{const t=Object.assign({},e),n=Object(m.c)();n&&(t.referralCode=n);const r=await Object(v.d)(t);if(!r.success)throw new Error(r);if(r.actions&&r.actions.length){const{publishableKey:e,checkoutSessionId:t}=r.actions[0],n=await function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h=!0;var r=Date.now();return w.then((function(e){return f(e,t,r)}))}(e);if(!n)throw new Error("Stripe is not loaded");await n.redirectToCheckout({sessionId:t})}return{success:!0,actions:r.actions}}catch(e){return{success:!1,message:e.response||e}}}t.a=new class{processPayment(e,data){switch(e){case"stripe":return y(Object.assign(Object.assign({},data),{provider:"stripe"}));case"paypal":return async function(e){try{const t=Object.assign({},e),n=Object(m.c)();n&&(t.referralCode=n);const r=await Object(v.d)(t);if(!r.success)throw new Error(r);const o=r.actions[0].url||null;if(!o)throw new Error("PayPal url is not defined");return window.location.href=o,{success:!0}}catch(e){return{success:!1,message:e.response||e}}}(Object.assign(Object.assign({},data),{provider:"paypal"}));case"wechat":return async function(e){try{const t=Object.assign({},e),n=Object(m.c)();n&&(t.referralCode=n);const r=await Object(v.b)(t);if(!r.success)throw new Error(r);const{qrCodeUrl:o,orderId:c}=r.actions[0];if(o&&c)return{success:!0,url:o,id:c};throw new Error("WeChat url is not defined")}catch(e){return{success:!1,message:e.response||e}}}(Object.assign(Object.assign({},data),{provider:"wechat"}));case"alipay":return async function(e){try{const t=Object.assign({},e),n=Object(m.c)();n&&(t.referralCode=n);const r=await Object(v.d)(t);if(!r.success)throw new Error(r);const o=r.actions[0].url||null;if(!o)throw new Error("AliPay url is not defined");return window.location.href=o,{success:!0}}catch(e){return{success:!1,message:e.response||e}}}(Object.assign(Object.assign({},data),{provider:"alipay"}));case"yoo-kassa":return Object.assign(Object.assign({},data),{provider:"yoo-kassa"}),{success:!1,message:"Will be implemented later"};default:return{success:!1,message:"Unsupported payment system"}}}}}}]);
//# sourceMappingURL=DownloadModal.1580025b56ea07907e65.js.map