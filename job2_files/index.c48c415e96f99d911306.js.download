(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1202:function(t,e,r){"use strict";r(889)},1203:function(t,e,r){var o=r(6)((function(i){return i[1]}));o.push([t.i,'@keyframes spin-b9f49894{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.request-page[data-v-b9f49894]{padding:24px 20px}@media(min-width:480px){.request-page[data-v-b9f49894]{padding:32px 40px}}h1[data-v-b9f49894]{margin-bottom:24px}.request-placeholders[data-v-b9f49894]{overflow:hidden;position:relative}.request-placeholders[data-v-b9f49894]:after{background:linear-gradient(0deg,#fff,hsla(0,0%,100%,0));bottom:0;content:"";height:70%;left:0;position:absolute;right:0}.request-list[data-v-b9f49894]{min-height:194px}.request-list[data-v-b9f49894] .infinite-scroller .preloader{height:120px}.request-list[data-v-b9f49894] .post+.post{margin-top:16px}@media(min-width:480px){.request-list[data-v-b9f49894] .post+.post{margin-top:24px}}.empty[data-v-b9f49894]{align-items:center;display:flex;flex-direction:column;height:194px;justify-content:center;text-align:center}.empty .empty-icon[data-v-b9f49894]{height:58px;margin:0 auto 16px;width:58px}.empty .empty-icon[data-v-b9f49894] svg{display:block}.empty .empty-title[data-v-b9f49894]{font-size:18px;font-weight:700;line-height:24px;margin-bottom:8px}.empty .empty-detail[data-v-b9f49894]{font-size:16px;line-height:24px;max-width:360px}',""]),o.locals={},t.exports=o},1687:function(t,e,r){"use strict";r.r(e);var o=r(8),n=r(9),l=r(106);r(52);var h={name:"RequestIconSearchPage",components:{requestSearch:()=>r.e(96).then(r.bind(null,1698)),requestForm:()=>r.e(88).then(r.bind(null,1674)),requestPost:()=>r.e(81).then(r.bind(null,1699)),requestPlaceholder:()=>r.e(94).then(r.bind(null,1700)),appInfiniteScroll:()=>r.e(2).then(r.bind(null,1701))},layout:"request-icon",async asyncData(t){let{store:e,query:r,req:o,route:h}=t,c=0,d=[],f=1;const m=e.state["request-icons"].makers;let y=!1,v=e.state.auth.user.authToken;try{const t=await l.a.fetchRequests({sort:"-createdAt",authToken:v,limit:15,...r});if(d=t.docs,c=t.total,f=t.pages,d.length||(y=!0),v&&!m)try{await e.dispatch("request-icons/fetchMakers",v)}catch(t){}}catch(t){console.error(t)}const{origin:x}=Object(n.getURL)(o),k=`${x}${h.path}`,w=Object(n.getSeoData)({url:k,title:"Request an icon | Icons8",description:"Request icons in your favourite style. Help us make our iconic world a better place."}),M=(t=>{switch(!0){case"isMine"in t:return{isMine:!0};case"isAssignedToMe"in t:return{isAssignedToMe:!0};case"isUnassigned"in t:return{isUnassigned:!0};case"isAssignedTo"in t:return{isAssignedTo:t.isAssignedTo};case"status"in t&&"resolved"===t.status:return{status:"resolved"};default:return"all"}})(r);null===r.term&&(r.term="");return{seo:w,total:c,pages:f,limit:15,posts:d,initialEmpty:y,initialUser:!1,...{...r,filterBy:M}}},data(){var t;return{initialUser:!1,page:1,makersIsLoading:!1,pages:1,limit:15,term:"",sort:"-createdAt",platforms:"",filterBy:"all",total:0,initialEmpty:!1,searchNotfound:!1,loading:!1,loadingMore:!1,posts:[],staticUrl:null!==(t="https://maxst.icons8.com")?t:""}},head(){return this.seo},computed:{...Object(o.c)("request-icons",["getSorting"]),...Object(o.e)({user:t=>t.auth.user,platformsList:t=>t.appInfo.platforms,makers:t=>t["request-icons"].makers}),requestedPlatformsList(){const t={};for(const[e,r]of Object.entries(this.platformsList))r.isDeprecated||(t[e]=r);return Object.keys(t).sort(((a,b)=>t[a].title.localeCompare(t[b].title))).reduce(((e,r)=>("all"!==r&&"emoji"!==r&&(e[r]=t[r]),e)),{})},makersList(){return this.getSorting()}},watch:{user(t){!this.posts.length||t.isGuest||this.initialUser&&t.loaded||(this.page=1,this.posts=[],this.fetchRequests(),this.updateMakers())}},mounted(){window.addEventListener("load",this.notify)},beforeDestroy(){window.removeEventListener("load",this.notify)},methods:{...Object(o.b)("request-icons",{fetchMakers:"fetchMakers"}),...Object(o.d)("request-icons",{setMakers:"SET_MAKERS"}),notify(){void 0===localStorage.requestFirstVisit&&this.$notify({icon:this.$icons["request/thumbsUp"],title:"You can vote for the icons",text:"The requested icons with the most votes we draw first",delay:0,onCloseHandler(){localStorage.requestFirstVisit=Date.now()}})},loadMore(){!this.loadingMore&&this.page<this.pages&&(this.page+=1,this.fetchRequests())},fetchRequests(){this.searchNotfound=!1,1===this.page&&(this.loading=!0),this.page>1&&(this.loadingMore=!0),this.debouncedFetchRequests()},debouncedFetchRequests:Object(n.debounce)((function(){const t={sort:this.sort,term:this.term.length?this.term:void 0,platforms:this.platforms.length?this.platforms:void 0};"object"==typeof this.filterBy&&Object.assign(t,this.filterBy),this.$router.push({query:t}),Object.assign(t,{page:this.page,limit:this.limit,authToken:this.user.authToken}),l.a.fetchRequests(t).then((t=>{this.total=t.total,this.pages=t.pages,this.$nextTick((()=>{this.posts=[...this.posts,...t.docs],this.posts.length||(this.searchNotfound=!0)}))})).catch((t=>console.warn(t))).finally((()=>{this.loading=!1,this.loadingMore=!1}))}),500),async updateMakers(){this.makersIsLoading=!0;try{await this.fetchMakers(),this.makersIsLoading=!1}catch(t){this.makersIsLoading=!1}},updateVotes(t,e){e.votesCount=t},requestAdd(data){this.pages>1&&this.pages>this.page&&this.posts.pop(),this.posts.unshift(data)},handleSearch(t){this.term=t,this.page=1,this.posts=[],this.sort="-createdAt",this.filterBy="all",this.fetchRequests()},handleSort(param){this.sort=param,this.page=1,this.posts=[],this.fetchRequests()},handleFilter(param){this.page=1,this.posts=[],this.filterBy=param,this.fetchRequests()},handlePlatform(param){this.page=1,this.posts=[],this.platforms=param,this.fetchRequests()}}},c=(r(1202),r(5)),component=Object(c.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"request-page"},[e("div",{staticClass:"container"},[e("h1",[t._v("Icon request")]),t._v(" "),e("request-form",{attrs:{title:t.term,styles:t.requestedPlatformsList,user:t.user},on:{"request:create":t.requestAdd,"request:search":t.handleSearch}}),t._v(" "),e("request-search",{style:t.platforms,attrs:{user:t.user,makers:t.makersList,"sort-by":t.sort,value:t.term,platform:t.platforms,"filter-by":t.filterBy,platforms:t.requestedPlatformsList},on:{"request:search":t.handleSearch,"request:sort":t.handleSort,"request:filter":t.handleFilter,"request:platform":t.handlePlatform}}),t._v(" "),e("div",{staticClass:"request-list"},[t.loading?[e("div",{staticClass:"request-placeholders"},t._l(5,(function(i){return e("request-placeholder",{key:i,attrs:{width:400,height:80}},[e("rect",{attrs:{x:"75",y:"20",rx:"4",ry:"4",width:"250",height:"8"}}),t._v(" "),e("rect",{attrs:{x:"75",y:"35",rx:"4",ry:"4",width:"220",height:"8"}}),t._v(" "),e("rect",{attrs:{x:"75",y:"50",rx:"4",ry:"4",width:"280",height:"8"}}),t._v(" "),e("rect",{attrs:{x:"75",y:"0",rx:"6",ry:"6",width:"320",height:"12"}}),t._v(" "),e("rect",{attrs:{x:"0",y:"0",rx:"6",ry:"6",width:"60",height:"65"}})])})),1)]:t.posts.length?[e("app-infinite-scroll",{attrs:{throttle:50,preloader:t.loadingMore},on:{infinite:t.loadMore}},t._l(t.posts,(function(r,o){return e("request-post",{key:o,attrs:{post:r,user:t.user,makers:t.makersList,"makers-is-loading":t.makersIsLoading,platforms:t.platformsList},on:{"update:votes":function(e){return t.updateVotes(e,r)},"request:infiniteScroll":t.updateMakers}})})),1)]:t.searchNotfound||t.initialEmpty?[e("div",{staticClass:"empty"},[e("img",{staticClass:"empty-icon",attrs:{src:`${t.staticUrl}/vue-static/icon/glass-48.png`,alt:"glass"}}),t._v(" "),e("div",{staticClass:"empty-title"},[t._v("\n            No requests found\n          ")]),t._v(" "),e("div",{staticClass:"empty-detail"},[t._v("\n            Create one in the form above\n          ")])])]:t._e()],2)],1)])}),[],!1,null,"b9f49894",null);e.default=component.exports},889:function(t,e,r){var content=r(1203);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(7).default)("f73a7026",content,!0,{sourceMap:!1})}}]);
//# sourceMappingURL=index.c48c415e96f99d911306.js.map