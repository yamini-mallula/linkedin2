(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{699:function(t,r,e){"use strict";e.d(r,"c",(function(){return n})),e.d(r,"d",(function(){return c})),e.d(r,"b",(function(){return l})),e.d(r,"a",(function(){return f}));const o="recent-colors";function n(t){const r=localStorage.getItem("I8_"+t);if(r)try{return JSON.parse(r)}catch{console.warn(`Could not parse saved settings for "${t}" effect`)}return null}function c(t,r){try{localStorage.setItem("I8_"+t,JSON.stringify(r))}catch(r){console.error(`Could not save settings for "${t}" effect\n`,r)}}function l(){return n(o)||[]}function f(t){let r=l();if(r.length>12&&(r=r.slice(0,12)),r.includes(t)){const e=r.splice(r.indexOf(t),1);r.unshift(...e)}else 12===r.length?(r.pop(),r.unshift(t)):r.unshift(t);c(o,r)}},708:function(t,r,e){"use strict";e.r(r),e.d(r,"init",(function(){return l})),e.d(r,"choosePaletteKey",(function(){return v})),e.d(r,"changeCurrentColor",(function(){return y})),e.d(r,"recolorNodes",(function(){return Y})),e.d(r,"recolorPalette",(function(){return X})),e.d(r,"savePaletteChanges",(function(){return m})),e.d(r,"loadPaletteChanges",(function(){return C})),e.d(r,"getPaletteChanges",(function(){return Z})),e.d(r,"saveSettings",(function(){return M})),e.d(r,"loadSettings",(function(){return j})),e.d(r,"reset",(function(){return O}));var o=e(697),n=e(699);const c="ToolRecolor";function l(t){const r=Object(o.getProject)(t);if(r.effects.recolor)return r.effects.recolor.controls;const e={};f(r.canvas.nodes.i8_mainSVG,e);if(!!!Object.keys(e).length)return;r.effects.recolor={nodes:{},active:!1,controls:{colorKey:null,color:null,palette:{},paletteChanges:{}}};const n=r.effects.recolor.nodes,c=r.effects.recolor.controls.palette;for(const t in e){const{color:r,initColor:o}=e[t];c[t]={color:r,initColor:o},n[t]=e[t].nodes}const l=Object.keys(c)[0];return r.effects.recolor.controls.colorKey=l,r.effects.recolor.controls.color=c[l].color,r.effects.recolor.controls}function f(t,r={}){let e=null,o=null,n=null;t.style.fillColor&&!t.style.fillColor.gradient&&(e="fill"),t.style.strokeColor&&!t.style.strokeColor.gradient&&(e="stroke"),t.style.fillColor&&t.style.fillColor.gradient&&(e="gradient-fill"),t.style.strokeColor&&t.style.strokeColor.gradient&&(e="gradient-stroke"),e&&("fill"===e&&(o=h(t.style.fillColor)),"stroke"===e&&(o=h(t.style.strokeColor)),"gradient-fill"===e&&(n=t.style.fillColor.gradient.stops),"gradient-stroke"===e&&(n=t.style.strokeColor.gradient.stops),n?n.forEach(((n,c)=>{o=h(n.color),d(r,o,e,t,c)})):d(r,o,e,t)),t.children&&t.children.forEach((t=>{f(t,r)}))}function h(t){let r=t.toCSS(!0);return void 0!==t.alpha&&1!==t.alpha&&(r+=Math.round(255*t.alpha).toString(16).padStart(2,"0")),r.toUpperCase()}function d(t,r,e,o,n=null){const c=`id_${r}`;!!r&&!t[c]&&(t[c]={initColor:r,color:r,nodes:[]}),t[c].nodes.push({type:e,node:o,index:n})}function v(t,r){const e=Object(o.getProject)(t);e&&(e.effects.recolor||l(t),e.effects.recolor.controls.colorKey=r,e.effects.recolor.controls.color=e.effects.recolor.controls.palette[r].color)}function y(t,r){const e=Object(o.getProject)(t);if(!e)return;e.effects.recolor||l(t);const n=e.effects.recolor.controls;n.color=r,X(t,n.colorKey,r),Y(t,n.colorKey,r)}function Y(t,r,e){if(!t||!r||!e)return;const n=Object(o.getProject)(t),c=n.effects.recolor.nodes;c&&(c[r].forEach((t=>{const r=t.type;"fill"===r&&(t.node.fillColor=e),"stroke"===r&&(t.node.strokeColor=e),"gradient-fill"===r&&(t.node.style.fillColor.gradient.stops[t.index].color=e),"gradient-stroke"===r&&(t.node.style.strokeColor.gradient.stops[t.index].color=e),t.color=e})),n.effects.recolor.active=!0)}function X(t,r,e){if(!t||!r||!e)return;const n=Object(o.getProject)(t);n.effects.recolor.controls.palette[r].color=e,n.effects.recolor.active=!0}function m(t){const r=Object(o.getProject)(t);if(!r)return;const e=r.effects.recolor.controls.palette;r.effects.recolor.controls.paletteChanges={};const n=r.effects.recolor.controls.paletteChanges;for(const t in e)e[t].initColor!==e[t].color&&(n[t]=e[t].color)}function C(t,r){const e=Object(o.getProject)(t);if(!e)return;const n=e.effects.recolor.controls.palette;for(const e in n){const{color:o,initColor:c}=n[e],l=r[e];if(l&&o===l||!l&&o===c)continue;let f;l&&o!==l?f=l:o!==c&&(f=c),X(t,e,f),Y(t,e,f)}}function Z(t){const r=Object(o.getProject)(t);return r&&r.effects.recolor?r.effects.recolor.controls.paletteChanges:null}function M(t,r){const e=Object(o.getProject)(t);if(!e||!e.effects.recolor.active)return;const l=e.effects.recolor.controls.palette,f=Object.keys(l),h=f.length,d=Object(n.c)(c)||{};if(1===h){const t=l[f[0]].color;d.color!==t&&Object(n.a)(t),Object(n.d)(c,{color:t})}else if(h>1){if(r){const e=l[r].color,o=l[r].initColor,c=Z(t);e!==o&&e!==c[r]&&Object(n.a)(e)}m(t)}}function j(t,r){const e=Object(o.getProject)(t);if(!e)return;e.effects.recolor||l(t);const f=e.effects.recolor.controls,h=f.palette,d=Object.keys(h).length,v=Object(n.c)(c)||{};if(1===d){const e=r&&r.color||v.color;e&&(X(t,f.colorKey,e),Y(t,f.colorKey,e),y(t,e),r&&r.color&&Object(n.d)(c,{color:r.color}))}else if(d>1){C(t,Z(t))}}function O(t){const r=Object(o.getProject)(t);if(!r)return;const e=r.effects.recolor.controls.palette;for(const r in e){const o=e[r].initColor;X(t,r,o),Y(t,r,o)}const n=Object.keys(e)[0];return r.effects.recolor.controls.colorKey=n,r.effects.recolor.controls.color=e[n].initColor,r.effects.recolor.active=!1,r.effects.recolor.controls.paletteChanges={},r.effects.recolor.controls.palette}},836:function(t,r,e){"use strict";e.d(r,"a",(function(){return st}));var o={};e.r(o),e.d(o,"cielab",(function(){return Z})),e.d(o,"cielch",(function(){return j})),e.d(o,"cieluv",(function(){return O})),e.d(o,"cmyk",(function(){return L})),e.d(o,"csshsl",(function(){return S})),e.d(o,"cssrgb",(function(){return E})),e.d(o,"hex",(function(){return w})),e.d(o,"hsl",(function(){return P})),e.d(o,"hsluv",(function(){return x})),e.d(o,"hsv",(function(){return _})),e.d(o,"lms",(function(){return I})),e.d(o,"rgb",(function(){return z})),e.d(o,"xyY",(function(){return H})),e.d(o,"XYZ",(function(){return V})),e.d(o,"yiq",(function(){return W}));var n={A:{X:1.0985*100,Y:100,Z:35.585},B:{X:99.072,Y:100,Z:85.223},C:{X:98.074,Y:100,Z:118.232},D50:{X:96.422,Y:100,Z:82.521},D55:{X:95.682,Y:100,Z:92.149},D65:{X:95.047,Y:100,Z:108.883},D75:{X:94.972,Y:100,Z:122.638},E:{X:100,Y:100,Z:100},F2:{X:.99186*100,Y:100,Z:67.393},F7:{X:95.041,Y:100,Z:108.747},F11:{X:1.00962*100,Y:100,Z:64.35}};function c(t){return n[t]}var l={BRADFORD:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],INVERSE_BRADFORD:[[.9869929,-.1470543,.1599627],[.4323053,.5183603,.0492912],[-.0085287,.0400428,.9684867]],SRGB_XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],INVERSE_SRGB_XYZ:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]]};function f(t){return l[t]}const h=function(t,r){const e=new Set(Object.keys(t));return r.every((t=>e.has(t)))},d=(t,r)=>"string"==typeof t&&t.slice(0,r.length)===r;var v={hex:t=>d(t,"#"),rgb:t=>h(t,["r","g","b"]),cssrgb:t=>d(t,"rgb("),hsl:t=>h(t,["h","s","l"]),csshsl:t=>d(t,"hsl("),hsv:t=>h(t,["h","s","v"]),cmyk:t=>h(t,["c","m","y","k"]),yiq:t=>h(t,["y","i","q"]),XYZ:t=>h(t,["X","Y","Z"]),xyY:t=>h(t,["x","y","Y"]),lms:t=>h(t,["rho","gamma","beta"]),cielab:t=>h(t,["L","a","b"]),cieluv:t=>h(t,["L","u","v"]),cielch:t=>h(t,["L","C","h"]),hsluv:t=>h(t,["hu","s","l"])};const y=Object.keys(v);const Y=.008856,X=903.3,m=c("D65"),C=t=>Math.pow(t,3)>Y?Math.pow(t,3):(116*t-16)/X;var Z={XYZ:t=>{const r=(t.L+16)/116,e=t.a/500+r,o=r-t.b/200,n=C(e),c=C(o),l=t.L>7.9996247999999985?Math.pow(r,3):t.L/X;return{X:n*m.X,Y:l*m.Y,Z:c*m.Z}}};function M(t){return t*(Math.PI/180)}var j={cieluv:t=>{const r=M(t.h),u=t.C*Math.cos(r),e=t.C*Math.sin(r);return{L:t.L,u:u,v:e}},hsluv:t=>{if(t.L>99.9999999)return{hu:t.h,s:0,l:100};if(t.L<1e-8)return{hu:t.h,s:0,l:0};const r=(t.L+16)/1560896,e=r>.008856?r:t.L/903.3,o=f("INVERSE_SRGB_XYZ");let n=[];for(let r=0;r<3;r++){let c=o[r][0],l=o[r][1],f=o[r][2];for(let r=0;r<2;r++){let o=(284517*c-94839*f)*e,h=(838422*f+769860*l+731718*c)*t.L*e-769860*r*t.L,d=(632260*f-126452*l)*e+126452*r;n.push({m:o/d,b:h/d})}}var c=Number.MAX_VALUE;let l=M(t.h);n.forEach((t=>{let r=t.b/(Math.sin(l)-t.m*Math.cos(l));r>=0&&(c=Math.min(c,r))}));let h=c;return{hu:t.h,s:t.C/h*100,l:t.L}}};var O={XYZ:t=>{const r=c("D65"),e=4*(o=r).X/(o.X+15*o.Y+3*o.Z);var o;const n=(t=>9*t.Y/(t.X+15*t.Y+3*t.Z))(r),a=1/3*(52*t.L/(t.u+13*t.L*e)-1),l=t.L>903.3*.008856?Math.pow((t.L+16)/116,3):t.L/903.3,b=-5*l,f=(l*(39*t.L/(t.v+13*t.L*n)-5)-b)/(a- -1/3);return{X:100*f,Y:100*l,Z:100*(f*a+b)}},cielch:t=>{const r=Math.sqrt(Math.pow(t.u,2)+Math.pow(t.v,2));let e=Math.atan2(t.v,t.u);return e<0&&(e+=2*Math.PI),e=e*(180/Math.PI),{L:t.L,C:r,h:e}}};const k=t=>({r:255*(1-t.c)*(1-t.k),g:255*(1-t.m)*(1-t.k),b:255*(1-t.y)*(1-t.k)});var L={rgb:k,cssrgb:t=>{const{r:r,g:g,b:b}=k(t);return"rgb("+Math.round(r)+","+Math.round(g)+","+Math.round(b)+")"}},S={hsl:t=>{const r=t.replace(/(hsl\(|\)|%|[\s]*)/g,"").split(",").map((t=>parseInt(t,10)));return{h:r[0],s:r[1],l:r[2]}}},E={rgb:t=>{const r=t.replace(/((rgb\(|\))|[\s]*)/g,"").split(",").map((t=>parseInt(t,10)));return{r:r[0],g:r[1],b:r[2]}}},w={rgb:t=>{const r=t.replace("#","").match(/.{2}/g).map((t=>parseInt(t,16)));return{r:r[0],g:r[1],b:r[2]}}};function R(t,r){return(t%r+r)%r}var P={rgb:t=>{if(0===t.s){var r=t.l/100*255;return{r:r,g:r,b:r}}var e,o,n;e=t.l>=50?t.l/100+t.s/100-t.l/100*(t.s/100):t.l/100*(1+t.s/100),o=t.l/100*2-e;var c,g,b,l=((n=t.h/360)+.333)%1,f=n,h=R(n-.333,1);return(c=6*l<1?o+6*(e-o)*l:2*l<1?e:3*l<2?o+6*(.666-l)*(e-o):o)<0&&(c=0),(g=6*f<1?o+6*(e-o)*f:2*f<1?e:3*f<2?o+6*(.666-f)*(e-o):o)<0&&(g=0),(b=6*h<1?o+6*(e-o)*h:2*h<1?e:3*h<2?o+6*(.666-h)*(e-o):o)<0&&(b=0),{r:255*c,g:255*g,b:255*b}},csshsl:t=>"hsl("+Math.round(t.h)+","+Math.round(t.s)+"%,"+Math.round(t.l)+"%)",hsv:t=>{const r=Object.assign({},t,{s:t.s/100,l:t.l/100});var e=r.s*(r.l<.5?r.l:1-r.l);return{h:r.h,s:100*(2*e/(r.l+e)),v:100*(r.l+e)}}},x={cielch:t=>{if(t.L>99.9999999)return{L:100,C:0,h:t.hu};if(t.L<1e-8)return{L:0,C:0,h:t.hu};const r=(t.l+16)/1560896,e=r>.008856?r:t.l/903.3,o=f("INVERSE_SRGB_XYZ");let n=[];for(let r=0;r<3;r++){let c=o[r][0],l=o[r][1],f=o[r][2];for(let r=0;r<2;r++){let o=(284517*c-94839*f)*e,h=(838422*f+769860*l+731718*c)*t.l*e-769860*r*t.l,d=(632260*f-126452*l)*e+126452*r;n.push({m:o/d,b:h/d})}}var c=Number.MAX_VALUE;let l=M(t.hu);n.forEach((t=>{let r=t.b/(Math.sin(l)-t.m*Math.cos(l));r>=0&&(c=Math.min(c,r))}));let h=c;return{L:t.l,C:h/100*t.s,h:t.hu}}},_={hsl:t=>{const r=Object.assign({},t,{h:t.h/360,s:t.s/100,v:t.v/100});let s,e=r.h;return s=(2-r.s)*r.v<1?r.s*r.v/((2-r.s)*r.v):r.s*r.v/(2-(2-r.s)*r.v),{h:360*e,s:100*s,l:100*((2-r.s)*r.v/2)}}},I={XYZ:t=>{const r=[t.rho,t.gamma,t.beta],e=f("INVERSE_BRADFORD").map((t=>r.reduce(((r,e,o)=>t[o]*e+r),0)));return{X:100*e[0],Y:100*e[1],Z:100*e[2]}}};function D(t,r){return t<r[0]?t=r[0]:t>r[1]&&(t=r[1]),t}const N=t=>D(t,[0,255]);function A(t){if(Math.cbrt)return Math.cbrt(t);var r=Math.pow(Math.abs(t),1/3);return t<0?-r:r}const B=.008856,K=c("D65");var V={rgb:t=>{let r=[t.X,t.Y,t.Z].map((t=>t/100)),e=f("INVERSE_SRGB_XYZ").map((t=>r.reduce(((r,e,o)=>t[o]*e+r),0))),[o,g,b]=e.map((t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)).map((t=>255*t));return function(t){return{r:N(t.r),g:N(t.g),b:N(t.b)}}({r:o,g:g,b:b})},lms:t=>{let r=[t.X,t.Y,t.Z].map((t=>t/100)),e=f("BRADFORD").map((t=>r.reduce(((r,e,o)=>t[o]*e+r),0)));return{rho:e[0],gamma:e[1],beta:e[2]}},cielab:t=>{const r=t.X/K.X,e=t.Y/K.Y,o=t.Z/K.Z,n=t=>t>B?A(t):(903.3*t+16)/116,c=n(r),l=n(e);return{L:116*l-16,a:500*(c-l),b:200*(l-n(o))}},cieluv:t=>{const r=t.Y/K.Y,e=r>B?116*A(r)-16:903.3*r,o=t=>4*t.X/(t.X+15*t.Y+3*t.Z),n=t=>9*t.Y/(t.X+15*t.Y+3*t.Z);return{L:e,u:13*e*(o(t)-o(K)),v:13*e*(n(t)-n(K))}},xyY:t=>({x:t.X/(t.X+t.Y+t.Z),y:t.Y/(t.X+t.Y+t.Z),Y:t.Y})};const{lms:F,cielab:G,cieluv:J,xyY:U}=V,$=t=>{var s,r,e=t.r/255,g=t.g/255,b=t.b/255,o=[e,g,b].sort(),n=(o[0]+o[2])/2*100;return o[0]===o[2]?(s=0,r=0):(s=n>=50?(o[2]-o[0])/(2-o[2]-o[0])*100:(o[2]-o[0])/(o[2]+o[0])*100,(r=o[2]===e?(g-b)/(o[2]-o[0])*60:o[2]===g?60*(2+(b-e)/(o[2]-o[0])):60*(4+(e-g)/(o[2]-o[0])))<0?r+=360:r>360&&(r%=360)),{h:r,s:s,l:n}},T=t=>{let r=[t.r,t.g,t.b].map((t=>t/255)).map((t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))),e=f("SRGB_XYZ"),[o,n,c]=e.map((t=>r.reduce(((r,e,o)=>t[o]*e+r),0))).map((t=>100*t));return{X:o,Y:n,Z:c}};var z={hex:t=>{var r=Math.round(t.r).toString(16);1===r.length&&(r="0"+r);var g=Math.round(t.g).toString(16);1===g.length&&(g="0"+g);var b=Math.round(t.b).toString(16);return 1===b.length&&(b="0"+b),"#"+r+g+b},cssrgb:t=>"rgb("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+")",hsl:$,csshsl:t=>{var{h:r,s:s,l:e}=$(t);return"hsl("+Math.round(r)+","+Math.round(s)+"%,"+Math.round(e)+"%)"},cmyk:t=>{var r=t.r/255,e=t.g/255,o=t.b/255,n=1-Math.max(r,e,o);return 1!==n?{c:(1-r-n)/(1-n),m:(1-e-n)/(1-n),y:(1-o-n)/(1-n),k:n}:{c:0,m:0,y:0,k:n}},yiq:t=>{var r=t.r/255*.299+t.g/255*.587+t.b/255*.114,i=t.r/255*.596+t.g/255*-.274+t.b/255*-.322,q=t.r/255*.211+t.g/255*-.523+t.b/255*.312;return{y:r,i:i=D(i,[-.5957,.5957]),q:q=D(q,[-.5226,.5226])}},XYZ:T,lms:t=>F(T(t)),cielab:t=>G(T(t)),cieluv:t=>J(T(t)),xyY:t=>U(T(t))},H={XYZ:t=>{const{x:r,y:e,Y:o}=t;return{X:o/e*r,Y:o,Z:o/e*(1-r-e)}}};const Q=t=>D(t,[0,255]);var W={rgb:t=>{const i=D(t.i,[-.5957,.5957]),q=D(t.q,[-.5226,.5226]);return{r:255*Q(t.y+.956*i+.621*q),g:255*Q(t.y+-.272*i+-.647*q),b:255*Q(t.y+-1.106*i+-1.703*q)}}};const tt={rgb:{default:"XYZ",csshsl:"hsl",hsv:"hsl"},hex:"rgb",hsl:"rgb",hsv:"hsl",csshsl:"hsl",cssrgb:"rgb",cmyk:"rgb",XYZ:{default:"rgb",cielch:"cieluv",hsluv:"cieluv"},xyY:"XYZ",lms:"XYZ",cieluv:{default:"XYZ",hsluv:"cielch"},cielch:"cieluv",cielab:"XYZ",yiq:"rgb",hsluv:"cielch"};function et(t,r,e){if(void 0===r)throw new Error("No value provided");const n=e||function(t){const r=y.find((r=>v[r](t)));if(!r)throw new Error("No type found for color "+t);return r}(r);if(n===t)return r;if(o[n][t])return ot(n,t,r);const c=tt[n],l="string"==typeof c?c:c[t]||c.default;return et(t,ot(n,l,r),l)}const ot=(t,r,e)=>o[t][r](e),nt=Object.keys(v);function ct(t){const object={};return nt.forEach((r=>{Object.defineProperty(object,r,{get:()=>lt(r,t),enumerable:!0})})),object}const lt=(t,r)=>Array.isArray(r)?r.map((r=>et(t,r))):et(t,r);function st(t,r){var e=et("hsl",r);return e.l+=t,e.l<0?e.l=0:e.l>100&&(e.l=100),ct(e)}}}]);
//# sourceMappingURL=effectsHelpers.4fc6f8c618d875aee892.js.map